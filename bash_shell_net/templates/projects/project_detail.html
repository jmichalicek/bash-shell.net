{% extends 'base.html' %}
{% load blog_tags %}
{% block primary %}
<div class="col-sm-9">
  <ul class="nav nav-tabs">
    <li class="active"><a href="#info" data-toggle="tab">Info</a></li>
    <li><a href="#news" data-toggle="tab">News</a></li>
  </ul>
  <div class="row">
    <div class="tab-content col-sm-8">
      <div class="tab-pane active" id="info">
        {{ object.description|render_markdown|safe }}
      </div>
      <div class="tab-pane" id="news">
        <dl>
  				{% for news in project_news %}
  					<dt>{{ news.date_created }}</dt>
  					<dd>{{ news.content|render_markdown|safe }}</dd>
  				{% empty %}
  					<dd>Nothing to see here, move along.</dd>
  				{% endfor %}
        </dl>
      </div>
    </div>
    <div class="span4">
      <div class="well">
        <h2>{{ object.name }}</h2>
        <dl class="dl-horizontal">
  				<dt><span class="pull-left">Created:</span></dt><dd>{{ project.created_date|date:"M d, Y" }}</dd>
  				<dt><span class="pull-left">Page updated:</span></dt><dd>{{ project.modified_date|date:"M d, Y" }}</dd>
  				<dt><span class="pull-left">Latest News:</span></dt><dd>{% if project_news.count > 0 %}{{ project_news.0.date_created|date:"M d, Y" }}{% endif %}</dd>
        </dl>
      </div>
      {% if object.project_hosting_services.all.exists %}
  	    <div class="well">
    	    <p>View this project on:</p>
      	  <p>
  					{% for host in project.project_hosting_services.all %}
  						{# this all ends up on one line when output by the browser #}
  						{{ host.hosting_service.name }} |
  						{% if host.project_url %} <a href="{{ host.project_url }}">project page</a>{% endif %}
  						{% if host.public_vcs_uri and host.vcs %} {% if host.project_url %} - {% endif %}
  							<a href="{{ host.public_vcs_uri }}">{{ host.get_vcs_display }}</a>
  						{% endif %}<br />
  					{% endfor %}
        	</p>
      	</div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
